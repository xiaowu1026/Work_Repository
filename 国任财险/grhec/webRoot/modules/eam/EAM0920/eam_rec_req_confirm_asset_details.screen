<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: StephenWang4010
    $Date: 2013-3-25 下午4:21:58  
    $Revision: 1.0  
    $Purpose: 资产申请验收，资产台账明细
-->
<a:screen xmlns:c="aurora.application.action" xmlns:a="http://www.aurora-framework.org/application" xmlns:p="uncertain.proc">
    <a:init-procedure>
        <a:model-query model="eam.eam0910.eam0910_valuable_flag_query" rootPath="valuable_flag"/>
        <a:model-query model="eam.eam0311.eam0311_asset_headers_query" rootPath="asset_header"/>
        <a:model-query fetchAll="true" model="eam.eam0311.eam0311_requisition_lines_edit" rootPath="req_line"/>
        <a:model-query model="eam.eam0910.eam0910_inter_acc_flag_query" rootPath="inter_acc_flag"/>
        <a:model-query defaultWhereClause="t1.base_trx_category = &apos;ADD&apos;" fetchAll="true" model="eam.eam0120.eam_transaction_types_lv" rootPath="transaction_types"/>
        <a:model-query model="eam.common.eam_currency_query" rootPath="eam_currency"/>
        <a:model-query model="eam.eam0910.eam0910_asset_finance_class_query" rootPath="asset_finance"/>
    </a:init-procedure>
    <a:view>
        <script><![CDATA[
        	Aurora.onReady(init);
        	function init(){
        	    // 核算凭证
                var accounting_flag = '${/model/inter_acc_flag/record/@accounting_flag}';
                var tabs = $("asset_management_tab");
                if (accounting_flag != 'Y') {
                    tabs.setDisabled(1);
                }
        	    
        	 	$('eam_asset_headers_readonly_result_ds').query();   
	
        	}
        	
        	function backFun() {
        	    $('eam_asset_cost_vadj_window').close();
        	}
        	
        	function setReadOnlyFun(){
                
             	try{
             	    var ast_requisition_type_code = '${/parameter/@ast_requisition_type_code}'; 
             		var fi_record = $("eam_asset_finance_info_result_ds").getCurrentRecord();
             		var form_record = $('eam_asset_headers_readonly_result_ds').getCurrentRecord();
             		//jhcw  QD005  无此单据类型
	             	// if(ast_requisition_type_code == 'QD005'){
	                    // fi_record.getMeta().getField('accumulated_dep_amt').setReadOnly(true);
	                    // fi_record.set('accumulated_dep_amt','');
	                    // fi_record.getMeta().getField('mount_dep_percent').setReadOnly(true);
	                    // fi_record.set('mount_dep_percent','');
	                    // fi_record.getMeta().getField('month_dep_amount').setReadOnly(true);
	                    // fi_record.set('month_dep_amount','');
	                    // fi_record.getMeta().getField('start_depreciatite_date').setReadOnly(true);
	                    // fi_record.set('start_depreciatite_date','');
	                    // fi_record.getMeta().getField('life_in_month').setReadOnly(true);
	                    // fi_record.set('life_in_month','');
	                    // fi_record.getMeta().getField('impairment_loss_amt').setReadOnly(true);
	                    // fi_record.set('impairment_loss_amt','');
	                    // fi_record.getMeta().getField('salvage_value').setReadOnly(true);
	                    // fi_record.set('salvage_value','');
	                    // fi_record.getMeta().getField('remaining_life_in_month').setReadOnly(true);
	                    // fi_record.set('remaining_life_in_month','');
	                    // fi_record.getMeta().getField('scrap_amount').setReadOnly(true);
	                    // fi_record.set('scrap_amount','');
	                    // fi_record.getMeta().getField('last_depr_period_name').setReadOnly(true);
	                    // fi_record.set('last_depr_period_name','');
	                    // fi_record.getMeta().getField('last_depr_date').setReadOnly(true);
	                    // fi_record.set('last_depr_date','');
	                    // fi_record.getMeta().getField('entity_class_old_desc').setReadOnly(true);
	                    // fi_record.set('entity_class_old_desc','');
	                    // fi_record.set('depreciate_flag','N');
	                // }  
	                
             	}catch(e){}
            }
        ]]></script>
        <a:dataSets>
            <a:dataSet id="trans_type_ds">
                <a:datas dataSource="/model/transaction_types"/>
            </a:dataSet>
            <a:dataSet id="eam_asset_headers_readonly_result_ds">
                <a:datas dataSource="/model/asset_header"/>
                <a:fields>
                    <a:field name="asset_book_id"/>
                    <a:field name="asset_id"/>
                    <a:field name="asset_book_desc" prompt="EAM_ASSET_CATEGORIES.ASSET_BOOK"/>
                    <a:field name="asset_code" prompt="EAM_ASSET_HEADERS.ASSET_CODE" readOnly="true"/>
                    <a:field name="description" prompt="EAM_ASSET_HEADERS.DESCRIPTION" readOnly="true"/>
                    <a:field name="tag_number" readOnly="true"/>
                    <a:field name="status"/>
                    <a:field name="status_desc" prompt="EAM_ASSET_HEADERS.STATUS"/>
                    <a:field name="serial_number" prompt="EAM_ASSET_HEADERS.SERIAL_NUMBER" readOnly="true"/>
                    <a:field name="asset_source_type" readOnly="true"/>
                    <a:field name="asset_source_type_desc" prompt="EAM_ASSET_HEADERS.ASSET_SOURCE_TYPE" readOnly="true"/>
                    <a:field name="lock_flag" checkedValue="Y" defaultValue="Y" prompt="EAM_ASSET_HEADERS.LOCK_FLAG" readOnly="true" uncheckedValue="N"/>
                    <a:field name="date_of_purchase" prompt="EAM_ASSET_HEADERS.DATE_OF_PURCHASE" readOnly="true"/>
                    <a:field name="gain_date" prompt="EAM_ASSET_HEADERS.GAIN_DATE" readOnly="true"/>
                    <a:field name="start_use_date" prompt="EAM_ASSET_HEADERS.START_USE_DATE" readOnly="true"/>
                    <a:field name="asset_unit" prompt="EAM_ASSET_HEADERS.ASSET_UNIT" readOnly="true"/>
                    <a:field name="asset_unit_desc" prompt="EAM_ASSET_HEADERS.ASSET_UNIT" readOnly="true"/>
                    <a:field name="quantity" prompt="EAM_ASSET_HEADERS.QUANTITY" readOnly="true"/>
                    <a:field name="cost" prompt="EAM_ASSET_HEADERS.COST" readOnly="true"/>
                    <a:field name="price" prompt="EXP_REPORT_LINES.PRIC" readOnly="true"/>
                    <a:field name="category_id"/>
                    <a:field name="category_desc" prompt="EAM_ASSET_HEADERS.CATEGORY_ID" readOnly="true"/>
                    <a:field name="category_sec_desc" readOnly="true"/>
                    <a:field name="entity_class_id"/>
                    <a:field name="entity_class_desc" prompt="EAM_ASSET_HEADERS.ENTITY_CLASS_ID" readOnly="true"/>
                    <a:field name="currency_code" prompt="CSH_PAYMENT.CURRENCY_CODE" readOnly="true"/>
                    <a:field name="currency_desc" prompt="EAM_TRANSACTION_ACCOUNTS.CURRENCY_CODE" readOnly="true"/>
                    <a:field name="location_id"/>
                    <a:field name="current_location_desc" readOnly="true"/>
                    <a:field name="location_type_desc" readOnly="true"/>
                    <a:field name="value_man_company_id"/>
                    <a:field name="value_man_company_desc" prompt="EAM_ASSET_HEADERS.VALUE_MAN_COMPANY_ID" readOnly="true"/>
                    <a:field name="value_man_unit_id"/>
                    <a:field name="value_man_unit_desc" prompt="EAM_ASSET_HEADERS.VALUE_MAN_UNIT_ID" readOnly="true"/>
                    <a:field name="value_man_position_id"/>
                    <a:field name="value_man_position_desc" prompt="EAM_ASSET_HEADERS.VALUE_MAN_POSITION_ID" readOnly="true"/>
                    <a:field name="entity_company_id"/>
                    <a:field name="entity_man_company_desc" prompt="EAM_ASSET_HEADERS.ENTITY_MAN_COMPANY_ID" readOnly="true"/>
                    <a:field name="entity_unit_id"/>
                    <a:field name="entity_man_unit_desc" prompt="EAM_ASSET_HEADERS.ENTITY_MAN_UNIT_ID" readOnly="true"/>
                    <a:field name="entity_position_id"/>
                    <a:field name="entity_man_position_desc" prompt="EAM_ASSET_HEADERS.ENTITY_MAN_POSITION_ID" readOnly="true"/>
                    <a:field name="responsibility_company_id"/>
                    <a:field name="responsibility_company_desc" prompt="EAM_ASSET_HEADERS.RESPONSIBILITY_COMPANY_ID" readOnly="true"/>
                    <a:field name="responsibility_center_id"/>
                    <a:field name="responsibility_center_desc" prompt="EAM_ASSET_HEADERS.RESPONSIBILITY_CENTER_ID" readOnly="true"/>
                    <a:field name="allocate_element_type"/>
                    <a:field name="allocate_element_type_desc" readOnly="true"/>
                    <a:field name="allocate_element_name" readOnly="true"/>
                    <a:field name="address" prompt="EAM_ASSET_HEADERS.ADDRESS" readOnly="true"/>
                    <a:field name="install_position" readOnly="true"/>
                    <a:field name="using_unit_old_desc" readOnly="true"/>
                    <a:field name="using_unit_desc" prompt="折旧承担部门" readOnly="true"/>
                    <a:field name="category_old_desc" readOnly="true"/>
                    <a:field name="category_sec_old_desc" readOnly="true"/>
                    <a:field name="entity_class_old_desc" readOnly="true"/>
                    <a:field name="current_location_desc" readOnly="true"/>
                    <a:field name="req_employee_name" readOnly="true"/>
                    <a:field name="req_desc" readOnly="true"/>
                    <a:field name="reference_number" readOnly="true"/>
                    <a:field name="invoice_number" readOnly="true"/>
                    <a:field name="fin_class_desc" prompt="EAM_ASSET_HEADERS.FIN_CLASS_ID" readOnly="true"/>
                    <a:field name="entity_unit_desc" prompt="使用部门" readOnly="true"/>
                    <a:field name="tag_number_old" prompt="原卡片号" readOnly="true"/>
                </a:fields>
            </a:dataSet>
            <a:dataSet id="eam_currency_ds">
                <a:datas dataSource="/model/eam_currency"/>
            </a:dataSet>
            <a:dataSet id="asset_finance_ds">
                <a:datas dataSource="/model/asset_finance"/>
            </a:dataSet>
            <a:dataSet id="eam0310_payment_cycle_ds" lookupcode="PAYMENT_CYCLE"/>
            <a:dataSet id="eam_asset_finance_info_result_ds" autoQuery="true" bindName="finance_info" bindTarget="eam_asset_headers_readonly_result_ds" model="eam.eam0810.eam0810_asset_finance_info_query" queryUrl="${/request/@context_path}/autocrud/eam.eam0810.eam0810_asset_finance_info_query/query?asset_id=${/parameter/@asset_id}">
                <a:fields>
                    <a:field name="asset_finance_info_id"/>
                    <a:field name="asset_id" defaultValue="${/parameter/@asset_id}"/>
                    <a:field name="finance_class_id"/>
                    <a:field name="asset_card_num" readOnly="true"/>
                    <a:field name="currency_code" defaultValue="${/model/asset_header/record/@currency_code}" readOnly="true"/>
                    <a:field name="currency_desc" displayField="currency_name" options="eam_currency_ds" prompt="EAM_ASSET_FINANCE_INFO.CURRENCY_NAME" readOnly="true" returnField="currency_code" valueField="currency_code"/>
                    <a:field name="original_cost" defaultValue="${/model/req_line/record/@amount}" readOnly="true"/>
                    <a:field name="current_cost" defaultValue="${/model/req_line/record/@amount}" readOnly="true"/>
                    <a:field name="accumulated_dep_amt" readOnly="true"/>
                    <a:field name="annual_dep_amt" readOnly="true"/>
                    <a:field name="impairment_loss_amt" readOnly="true"/>
                    <a:field name="salvage_value" readOnly="true"/>
                    <a:field name="start_depreciatite_date" readOnly="true"/>
                    <a:field name="last_depr_period_name" readOnly="true"/>
                    <a:field name="last_depr_date" readOnly="true"/>
                    <a:field name="life_in_month" defaultValue="${/model/asset_finance/record/@depreciation_months}" readOnly="true"/>
                    <a:field name="scrap_amount" prompt="EAM_REQUISITION_LINES.DISCARD_AMOUNT" readOnly="true"/>
                    <a:field name="remaining_life_in_month" defaultValue="${/model/asset_finance/record/@depreciation_months}" readOnly="true"/>
                    <a:field name="scrap_cost" readOnly="true"/>
                    <a:field name="finance_class_desc" displayField="class_name" options="asset_finance_ds" prompt="EAM_ASSET_FINANCE_INFO.FINANCE_CLASS_DESC" readOnly="true" returnField="finance_class_id" valueField="class_id">
                        <a:mapping>
                            <a:map from="salvage_value_rate" to="salvage_value_rate"/>
                            <a:map from="depreciate_flag" to="depreciate_flag"/>
                            <a:map from="start_depreciatite_date" to="start_depreciatite_date"/>
                            <a:map from="prorate_convention_code" to="prorate_convention_code"/>
                            <a:map from="depreciation_months" to="depreciation_months"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="depreciation_months" prompt="EAM_ASSET_FINANCE_INFO.FINANCE_CLASS_IN_MONTH" readOnly="true"/>
                    <a:field name="prorate_convention_code" readOnly="true"/>
                    <a:field name="depreciate_flag" checkedValue="Y" defaultValue="N" readOnly="true" uncheckedValue="N"/>
                    <a:field name="salvage_value_rate" prompt="EAM_ASSET_FIN_CLASSES.SALVAGE_VALUE_RATE" readOnly="true"/>
                    <a:field name="dimension1_id" defaultValue="${/model/dimension_default_val/record/@dimension_value_id}" readOnly="true"/>
                    <a:field name="dimension1_name" defaultValue="${/model/dimension_default_val/record/@description}" lovGridHeight="300" lovHeight="480" lovService="eam.common.eam_requisition_dimension_lov?employee_id=${/model/eam0310_req_header/record/@employee_id}" lovWidth="550" prompt="项目" readOnly="true">
                        <a:mapping>
                            <a:map from="dimension_value_id" to="dimension1_id"/>
                            <a:map from="description" to="dimension1_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="mount_dep_percent" readOnly="true"/>
                    <a:field name="mount_dep_percent_show" readOnly="true"/>
                    <a:field name="month_dep_amount" readOnly="true"/>
                    <a:field name="month_dep_amount" readOnly="true"/>
                    <a:field name="entity_class_old_desc" readOnly="true"/>
                </a:fields>
                <a:events>
                    <a:event name="load" handler="setReadOnlyFun"/>
                </a:events>
            </a:dataSet>
            <!--租入信息 -->
            <a:dataSet id="eam0810_eam_asset_lease_info_result_ds" autoQuery="true" bindName="lease_info" bindTarget="eam_asset_headers_readonly_result_ds" model="eam.eam0810.eam0810_eam_asset_lease_info_query" queryUrl="${/request/@context_path}/autocrud/eam.eam0810.eam0810_eam_asset_lease_info_query/query?asset_id=${/parameter/@asset_id}" selectable="true">
                <a:fields>
                    <a:field name="lease_id"/>
                    <a:field name="asset_id"/>
                    <a:field name="contract_header_id"/>
                    <a:field name="contract_header_num" prompt="EAM_ASSET_LEASE_INFO.CONTRACT_HEADER_NUM" readOnly="true"/>
                    <a:field name="lease_price" prompt="EAM_ASSET_LEASE_INFO.LEASE_PRICE" readOnly="true"/>
                    <a:field name="price" prompt="EAM_ASSET_LEASE_INFO.PRICE" readOnly="true"/>
                    <a:field name="currency" prompt="EAM_ASSET_LEASE_INFO.CURRENCY_CODE" readOnly="true"/>
                    <a:field name="lessor" prompt="EAM_ASSET_LEASE_INFO.LESSOR" readOnly="true"/>
                    <a:field name="certificate_type" prompt="EAM_ASSET_LEASE_INFO.CERTIFICATE_TYPE" readOnly="true"/>
                    <a:field name="certificate_num" prompt="EAM_ASSET_LEASE_INFO.CERTIFICATE_NUM" readOnly="true"/>
                    <a:field name="rent_date_from" prompt="EAM_ASSET_LEASE_INFO.RENT_DATE_FROM" readOnly="true"/>
                    <a:field name="rent_date_to" prompt="EAM_ASSET_LEASE_INFO.RENT_DATE_TO" readOnly="true"/>
                    <a:field name="free_date_from" prompt="EAM_ASSET_LEASE_INFO.FREE_DATE_FROM" readOnly="true"/>
                    <a:field name="free_date_to" prompt="EAM_ASSET_LEASE_INFO.FREE_DATE_TO" readOnly="true"/>
                    <a:field name="payment_cycle" prompt="EAM_ASSET_LEASE_INFO.PAYMENT_CYCLE" readOnly="true"/>
                    <a:field name="payment_cycle_desc" displayField="code_value_name" options="eam0310_payment_cycle_ds" prompt="EAM_ASSET_LEASE_INFO.PAYMENT_CYCLE" readOnly="true" returnField="payment_cycle" valueField="code_value"/>
                    <a:field name="unit_rent" prompt="EAM_ASSET_LEASE_INFO.UNIT_RENT" readOnly="true"/>
                    <a:field name="rent_unit" prompt="EAM_ASSET_LEASE_INFO.RENT_UNIT" readOnly="true"/>
                    <a:field name="record_flag" prompt="EAM_ASSET_LEASE_INFO.RECORD_FLAG" readOnly="true"/>
                    <a:field name="cash_pledge" prompt="EAM_ASSET_LEASE_INFO.CASH_PLEDGE" readOnly="true"/>
                    <a:field name="liquidated_damages" prompt="EAM_ASSET_LEASE_INFO.LIQUIDATED_DAMAGES" readOnly="true"/>
                    <a:field name="payment_record" prompt="EAM_ASSET_LEASE_INFO.PAYMENT_RECORD" readOnly="true"/>
                    <a:field name="house_rent_num" prompt="EAM_ASSET_LEASE_INFO.HOUSE_RENT_NUM" readOnly="true"/>
                    <a:field name="management_cost" prompt="EAM_ASSET_LEASE_INFO.MANAGEMENT_COST" readOnly="true"/>
                    <a:field name="floating_rentcal" prompt="EAM_ASSET_LEASE_INFO.FLOATING_RENTCAL" readOnly="true"/>
                    <a:field name="asset_usage" prompt="EAM_ASSET_LEASE_INFO.ASSET_USAGE" readOnly="true"/>
                    <a:field name="asset_usage_desc" prompt="EAM_ASSET_LEASE_INFO.ASSET_USAGE" readOnly="true"/>
                </a:fields>
            </a:dataSet>
            <a:dataSet id="value_type_ds" lookupCode="EAM_VALUE_TYPE"/>
            <a:dataSet id="cost_source_ds" autoQuery="true" bindName="cost_lines" bindTarget="eam_asset_headers_readonly_result_ds" model="eam.eam0310.eam0310_asset_cost_sources_edit" queryUrl="${/request/@context_path}/autocrud/eam.eam0310.eam0310_asset_cost_sources_edit/query?asset_id=${/parameter/@asset_id}&amp;document_id=${/parameter/@requisition_header_id}&amp;document_line_id=${/parameter/@requisition_line_id}" selectable="true">
                <a:fields>
                    <a:field name="cost_source_id"/>
                    <a:field name="source_type" prompt="EAM_ASSET_HEADERS.ASSET_SOURCE_TYPE"/>
                    <a:field name="source_type_desc" prompt="EAM_ASSET_HEADERS.ASSET_SOURCE_TYPE"/>
                    <a:field name="source_asset_id"/>
                    <a:field name="asset_id"/>
                    <a:field name="source_asset_code" lovGridHeight="240" lovHeight="400" lovService="eam.eam0310.eam0310_source_asset_query" lovWidth="500" prompt="EAM_ASSET_COST_SOURCES.SOURCE_ASSET_CODE" title="EAM_ASSET_COST_SOURCES.SOURCE_ASSET_CODE">
                        <a:mapping>
                            <a:map from="asset_id" to="source_asset_id"/>
                            <a:map from="asset_code" to="source_asset_code"/>
                            <a:map from="source_asset_cost" to="source_asset_cost"/>
                            <a:map from="source_asset_sum_cost" to="source_asset_sum_cost"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="source_asset_name" prompt="EAM_ASSET_COST_SOURCES.SOURCE_ASSET_NAME"/>
                    <a:field name="source_asset_cost" prompt="EAM_ASSET_COST_SOURCES.SOURCE_ASSET_COST"/>
                    <a:field name="source_asset_sum_cost" prompt="EAM_ASSET_COST_SOURCES.SOURCE_ASSET_SUM_COST1"/>
                    <a:field name="cost_value_type"/>
                    <a:field name="cost_value_type_desc" displayField="code_value_name" options="value_type_ds" prompt="EAM_ASSET_COST_SOURCES.COST_VALUE_TYPE" returnField="cost_value_type" valueField="code_value"/>
                    <a:field name="cost" prompt="EAM_ASSET_COST_SOURCES.COST" validator="costValidator"/>
                </a:fields>
            </a:dataSet>
        </a:dataSets>
        <a:screenBody>
            <a:form column="1" labelWidth="100" title="EAM_ASSET_HEADERS.TITLE" width="1024">
                <a:hBox labelWidth="100">
                    <a:textField name="tag_number" bindTarget="eam_asset_headers_readonly_result_ds" prompt="卡片号"/>
                    <a:textField name="asset_code" bindTarget="eam_asset_headers_readonly_result_ds"/>
                    <a:comboBox name="category_desc" bindTarget="eam_asset_headers_readonly_result_ds" prompt="资产大类"><![CDATA[
                    ]]></a:comboBox>
                    <a:textField name="description" bindTarget="eam_asset_headers_readonly_result_ds" prompt="资产名称"/>
                </a:hBox>
                <a:hBox labelWidth="100">
                    <a:lov name="entity_man_company_desc" bindTarget="eam_asset_headers_readonly_result_ds" prompt="使用机构"/>
                    <a:lov name="entity_unit_desc" bindTarget="eam_asset_headers_readonly_result_ds"/>
                    <a:lov name="using_unit_desc" bindTarget="eam_asset_headers_readonly_result_ds"><![CDATA[
                    ]]></a:lov>
                    <!-- <a:lov name="responsibility_center_desc" bindTarget="eam_asset_headers_readonly_result_ds"/> -->
                    <a:lov name="req_employee_name" bindTarget="eam_asset_headers_readonly_result_ds" prompt="使用人"/>
                </a:hBox>
                <a:hBox labelWidth="100">
                    <a:textArea name="req_desc" bindTarget="eam_asset_headers_readonly_result_ds" height="80" prompt="摘要" width="910"/>
                </a:hBox>
            </a:form>
            <!-- 按钮 -->
            <a:hBox>
                <a:button click="backFun" text="HAP_BACK"/>
            </a:hBox>
            <a:tabPanel id="asset_management_tab" height="300" width="1024">
                <a:tabs>
                    <!-- <a:tab height="100" prompt="EAM_ASSET_HEADERS.FINANCIAL_INFORMATION" ref="${/request/@context_path}/modules/eam/EAM0910/eam_asset_finance_info.screen?asset_id=${/parameter/@asset_id}&amp;requisition_line_id=${/parameter/@requisition_line_id}" width="70"/> -->
                    <a:tab height="100" prompt="EAM_ASSET_HEADERS.FINANCIAL_INFORMATION" width="70">
                        <a:form column="1" height="179" labelWidth="100" width="880">
                            <a:box column="3" labelWidth="130">
                                <a:comboBox name="finance_class_desc" bindTarget="eam_asset_finance_info_result_ds"/>
                                <a:comboBox name="currency_desc" bindTarget="eam_asset_finance_info_result_ds"/>
                                <a:numberField name="original_cost" bindTarget="eam_asset_finance_info_result_ds" prompt="原始成本" renderer="Aurora.formatMoney"/>
                            </a:box>
                            <a:box column="3" labelWidth="130">
                                <a:numberField name="current_cost" bindTarget="eam_asset_finance_info_result_ds" renderer="Aurora.formatMoney"/>
                                <a:numberField name="annual_dep_amt" bindTarget="eam_asset_finance_info_result_ds" renderer="Aurora.formatMoney"/>
                                <a:numberField name="accumulated_dep_amt" bindTarget="eam_asset_finance_info_result_ds" renderer="Aurora.formatMoney"/>
                            </a:box>
                            <a:box column="3" labelWidth="130">
                                <!--  <a:textField name="mount_dep_percent_show" bindTarget="eam_asset_finance_info_result_ds" prompt="月折旧率"/> -->
                                <a:numberField name="month_dep_amount" bindTarget="eam_asset_finance_info_result_ds" prompt="月折旧额" renderer="Aurora.formatMoney"/>
                                <a:numberField name="impairment_loss_amt" bindTarget="eam_asset_finance_info_result_ds" renderer="Aurora.formatMoney"/>
                                <a:numberField name="salvage_value" bindTarget="eam_asset_finance_info_result_ds" renderer="Aurora.formatMoney"/>
                                <a:datePicker name="start_depreciatite_date" bindTarget="eam_asset_finance_info_result_ds" renderer="Aurora.formatDate"/>
                                <a:numberField name="life_in_month" allowDecimals="false" bindTarget="eam_asset_finance_info_result_ds"/>
                                <a:numberField name="remaining_life_in_month" allowDecimals="false" bindTarget="eam_asset_finance_info_result_ds"/>
                                <a:numberField name="scrap_amount" bindTarget="eam_asset_finance_info_result_ds" renderer="Aurora.formatMoney"/>
                                <a:textField name="last_depr_period_name" bindTarget="eam_asset_finance_info_result_ds"/>
                                <a:datePicker name="last_depr_date" bindTarget="eam_asset_finance_info_result_ds" renderer="Aurora.formatDate"/>
                                <a:textField name="entity_class_old_desc" bindTarget="eam_asset_finance_info_result_ds" prompt="原财务分类"/>
                                <a:checkBox name="depreciate_flag" bindTarget="eam_asset_finance_info_result_ds" checkedValue="Y" uncheckedValue="N" width="152"/>
                            </a:box>
                        </a:form>
                    </a:tab>
                    <!-- 核算凭证 -->
                    <a:tab height="100" prompt="EAM_REQUISITION_ACCOUNTING_VOCHERS" ref="${/request/@context_path}/modules/eam/EAM0910/eam_asset_acc_tab_readonly.screen?asset_id=${/parameter/@asset_id}&amp;requisition_header_id=${/parameter/@requisition_header_id}&amp;requisition_line_id=${/parameter/@requisition_line_id}" width="70"/>
                    <a:tab height="100" prompt="EAM_ASSET_HEADERS.BASIC_INFORMATION" width="70">
                        <a:form column="1" height="210" labelWidth="100" width="890">
                            <a:box column="3" labelWidth="130">
                                <a:textField name="serial_number" bindTarget="eam_asset_headers_readonly_result_ds"/>
                                <a:comboBox name="asset_source_type_desc" bindTarget="eam_asset_headers_readonly_result_ds"/>
                                <a:comboBox name="currency_desc" bindTarget="eam_asset_headers_readonly_result_ds"/>
                            </a:box>
                            <a:box column="3" labelWidth="130">
                                <!-- <a:textField name="reference_number" bindTarget="eam_asset_headers_readonly_result_ds" prompt="批准文号"/> -->
                                <a:datePicker name="start_use_date" bindTarget="eam_asset_headers_readonly_result_ds"><![CDATA[
                                ]]></a:datePicker>
                                <a:comboBox name="asset_unit_desc" bindTarget="eam_asset_headers_readonly_result_ds"/>
                            </a:box>
                            <a:box column="3" labelWidth="130">
                                <a:numberField name="quantity" allowDecimals="false" allowNegative="false" bindTarget="eam_asset_headers_readonly_result_ds"/>
                                <a:numberField name="price" allowDecimals="true" allowFormat="true" bindTarget="eam_asset_headers_readonly_result_ds" decimalPrecision="2"/>
                                <!--<a:lov name="category_desc" bindTarget="eam_asset_headers_readonly_result_ds"/>-->
                                <a:numberField name="cost" allowDecimals="true" allowNegative="false" bindTarget="eam_asset_headers_readonly_result_ds" decimalPrecision="2"/>
                            </a:box>
                            <a:box column="3" labelWidth="130">
                                <a:comboBox name="category_sec_desc" bindTarget="eam_asset_headers_readonly_result_ds" prompt="资产小类"><![CDATA[
                                ]]></a:comboBox>
                                <a:comboBox name="fin_class_desc" bindTarget="eam_asset_headers_readonly_result_ds"><![CDATA[
                                ]]></a:comboBox>
                                <a:comboBox name="entity_class_desc" bindTarget="eam_asset_headers_readonly_result_ds" prompt="资产实物分类"><![CDATA[
                                ]]></a:comboBox>
                            </a:box>
                            <a:box column="3" labelWidth="130">
                                <a:textField name="install_position" bindTarget="eam_asset_headers_readonly_result_ds" prompt="物理位置"/>
                                <a:textField name="invoice_number" bindTarget="eam_asset_headers_readonly_result_ds" prompt="发票号"/>
                                <!-- <a:textField name="using_unit_old_desc" bindTarget="eam_asset_headers_readonly_result_ds" prompt="原使用部门"/> -->
                            </a:box>
                            <a:box column="3" labelWidth="130">
                                <!-- <a:lov name="tag_number_old" bindTarget="eam_asset_headers_readonly_result_ds" prompt="原卡片号"/> --><![CDATA[
                                
                                
                                
                                
                                
                                
                                
                            ]]></a:box>
                        </a:form>
                    </a:tab>
                    <!--合作伙伴 -->
                    <a:tab height="100" prompt="EAM_ASSET_HEADERS.PARTNERS" ref="${/request/@context_path}/modules/eam/public/eam_asset_partner_info_readonly_for_requisition.screen?asset_id=${/parameter/@asset_id}" width="70"/>
                    <!--位置信息 -->
                    <a:tab height="100" prompt="EAM_ASSET_HEADERS.LOCATION_INFORMATION" ref="${/request/@context_path}/modules/eam/public/eam_asset_location_histories_readonly_for_requisition.screen?asset_id=${/parameter/@asset_id}" width="70"/>
                    <!-- <a:tab height="100" prompt="EAM_ASSET_HEADERS.ORGANIZATIONAL_STRUCTURE" width="70">
                        <a:form column="1" height="200" labelWidth="100" width="890">
                            <a:fieldSet title="EAM_LOCATIONS.VALUE_MAN_ORG">
                                <a:box column="3">
                                    <a:lov name="value_man_company_desc" bindTarget="eam_asset_headers_readonly_result_ds"/>
                                    <a:lov name="value_man_unit_desc" bindTarget="eam_asset_headers_readonly_result_ds"/>
                                    <a:lov name="value_man_position_desc" bindTarget="eam_asset_headers_readonly_result_ds"/>
                                </a:box>
                            </a:fieldSet>
                            <a:fieldSet title="EAM_LOCATIONS.ENTITY_MAN_ORG">
                                <a:box column="3">
                                    <a:lov name="entity_man_company_desc" bindTarget="eam_asset_headers_readonly_result_ds"/>
                                    <a:lov name="entity_man_unit_desc" bindTarget="eam_asset_headers_readonly_result_ds"/>
                                    <a:lov name="entity_man_position_desc" bindTarget="eam_asset_headers_readonly_result_ds"/>
                                </a:box>
                            </a:fieldSet>
                            <a:fieldSet title="EAM_ASSET_HEADERS.RESPONSIBILITY_ATTRIBUTION">
                                <a:box column="3">
                                    <a:lov name="responsibility_company_desc" bindTarget="eam_asset_headers_readonly_result_ds"/>
                                    <a:lov name="responsibility_center_desc" bindTarget="eam_asset_headers_readonly_result_ds"/>
                                </a:box>
                            </a:fieldSet>
                        </a:form>
                    </a:tab> -->
                    <!--产权信息 -->
                    <a:tab height="100" prompt="EAM_ASSET_HEADERS.PROPERTY_INFORMATION" ref="${/request/@context_path}/modules/eam/public/eam_asset_property_info_readonly_for_requisition.screen?asset_id=${/parameter/@asset_id}" width="70"/>
                    <!--保险信息 -->
                    <a:tab height="100" prompt="EAM_ASSET_HEADERS.INSURANCE_INFORMATION" ref="${/request/@context_path}/modules/eam/public/eam_asset_insure_info_readonly_for_requisition.screen?asset_id=${/parameter/@asset_id}" width="70"/>
                    <!--特性参数 -->
                    <!-- <a:tab height="100" prompt="EAM_ASSET_HEADERS.CHARACTERISTIC_PARAMETERS" ref="${/request/@context_path}/modules/eam/public/eam_asset_character_values_readonly_for_requisition.screen?asset_id=${/parameter/@asset_id}" width="70"/> -->
                    <!--  whf 20151105<a:tab height="100" prompt="EAM_ASSET_HEADERS.CHARACTERISTIC_PARAMETERS" ref="${/request/@context_path}/modules/eam/public/eam_asset_character_values_readonly_for_requisition.screen?asset_id=${/parameter/@asset_id}" width="70"/> -->
                    <!--文档信息 -->
                    <a:tab height="100" prompt="EAM_ASSET_HEADERS.DOCUMENT_INFORMATION" ref="${/request/@context_path}/check_uploadFile.screen?table_name=EAM_ASSET_HEADERS&amp;header_id=${/parameter/@asset_id}" width="70"/>
                    <!--分摊分配 -->
                    <!-- <a:tab height="100" prompt="EAM_ASSET_HEADERS.SHARING_ALLOCATION" ref="${/request/@context_path}/modules/eam/public/eam_asset_allocations_readonly_for_requisition.screen?asset_id=${/parameter/@asset_id}" width="70"/> -->
                    <!--租入信息 -->
                    <!--  <a:tab height="100" prompt="租入信息" width="70">
                        <a:form bindTarget="eam0810_eam_asset_lease_info_result_ds" column="1" height="200">
                            <a:box column="3" labelWidth="140">
                                <a:textField name="contract_header_num" bindTarget="eam0810_eam_asset_lease_info_result_ds"/>
                                <a:numberField name="lease_price" bindTarget="eam0810_eam_asset_lease_info_result_ds" renderer="Aurora.formatMoney"/>
                                <a:numberField name="price" bindTarget="eam0810_eam_asset_lease_info_result_ds" renderer="Aurora.formatMoney"/>
                            </a:box>
                            <a:box column="3" labelWidth="140">
                                <!@<a:textField name="currency" bindTarget="eam0810_eam_asset_lease_info_result_ds"/> 
                                <a:textField name="lessor" bindTarget="eam0810_eam_asset_lease_info_result_ds"/>
                                <a:textField name="certificate_type" bindTarget="eam0810_eam_asset_lease_info_result_ds"/>
                                <a:textField name="certificate_num" bindTarget="eam0810_eam_asset_lease_info_result_ds"/>
                            </a:box>
                            <a:box column="3" labelWidth="140">
                                <a:datePicker name="rent_date_from" bindTarget="eam0810_eam_asset_lease_info_result_ds"><![CDATA[
                                ]]></a:datePicker>
                                <a:datePicker name="rent_date_to" bindTarget="eam0810_eam_asset_lease_info_result_ds"><![CDATA[
                                ]]></a:datePicker>
                                <a:comboBox name="payment_cycle_desc" bindTarget="eam0810_eam_asset_lease_info_result_ds"/>
                            </a:box>
                            <a:box column="4" labelWidth="140">
                                <a:datePicker name="free_date_from" bindTarget="eam0810_eam_asset_lease_info_result_ds"><![CDATA[
                                ]]></a:datePicker>
                                <a:datePicker name="free_date_to" bindTarget="eam0810_eam_asset_lease_info_result_ds"><![CDATA[
                                ]]></a:datePicker>
                                <a:numberField name="unit_rent" bindTarget="eam0810_eam_asset_lease_info_result_ds" renderer="Aurora.formatMoney"/>
                            </a:box>
                            <a:box column="3" labelWidth="140">
                                <a:textField name="rent_unit" bindTarget="eam0810_eam_asset_lease_info_result_ds"/>
                                <a:numberField name="cash_pledge" bindTarget="eam0810_eam_asset_lease_info_result_ds" renderer="Aurora.formatMoney"/>
                                <a:numberField name="liquidated_damages" bindTarget="eam0810_eam_asset_lease_info_result_ds" renderer="Aurora.formatMoney"/>
                            </a:box>
                            <a:box column="3" labelWidth="140">
                                <a:textField name="payment_record" bindTarget="eam0810_eam_asset_lease_info_result_ds"/>
                                <a:textField name="house_rent_num" bindTarget="eam0810_eam_asset_lease_info_result_ds"/>
                                <a:numberField name="management_cost" bindTarget="eam0810_eam_asset_lease_info_result_ds" renderer="Aurora.formatMoney"/>
                            </a:box>
                            <a:box column="3" labelWidth="140">
                                <a:textField name="floating_rentcal" bindTarget="eam0810_eam_asset_lease_info_result_ds"/>
                                <a:comboBox name="asset_usage_desc" bindTarget="eam0810_eam_asset_lease_info_result_ds"/>
                                <a:checkBox name="record_flag" bindTarget="eam0810_eam_asset_lease_info_result_ds"/>
                            </a:box>
                        </a:form>
                    </a:tab> -->
                    <a:tab id="eam_asset_code_sources" height="100" prompt="EAM_ASSET_COST_SOURCES" width="70">
                        <a:grid bindTarget="cost_source_ds" height="180" navBar="true" width="880">
                            <a:toolBar>
                                <a:label/>
                            </a:toolBar>
                            <a:columns>
                                <a:column name="source_type_desc" align="center"/>
                                <a:column name="source_asset_code" align="center"/>
                                <a:column name="source_asset_name" align="center"/>
                                <a:column name="source_asset_cost" align="right" renderer="Aurora.formatMoney"/>
                                <a:column name="source_asset_sum_cost" align="right" renderer="Aurora.formatMoney"/>
                                <a:column name="cost_value_type_desc" align="center"/>
                                <a:column name="cost" align="right" renderer="Aurora.formatMoney"/>
                            </a:columns>
                        </a:grid>
                    </a:tab>
                </a:tabs>
            </a:tabPanel>
        </a:screenBody>
    </a:view>
    <a:view-config>
        <c:create-config targetId="dimension1">
            <p:switch test="/parameter/@bgt_ctrl_flag">
                <p:case value="Y">
                    <c:process-config>
                        <a:lov name="dimension1_name" align="center" bindTarget="eam_asset_finance_info_result_ds" prompt="项目"/>
                    </c:process-config>
                </p:case>
            </p:switch>
        </c:create-config>
    </a:view-config>
</a:screen>
